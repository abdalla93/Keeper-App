(this["webpackJsonpkeeper-app-part-1-starting"]=this["webpackJsonpkeeper-app-part-1-starting"]||[]).push([[0],{57:function(e,t,a){e.exports=a(85)},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(18),l=a.n(s),o=a(48),c=a.n(o),u=a(20),i=a(14),p=a.n(i),m=a(25),d=a(10),E=a(8),h=(e,t)=>{switch(t.type){case"TOKEN":return Object(E.a)({},e,{token:t.payload,isAuthenticated:!0});case"REMOVETOKEN":return{user:{username:"",email:"",password:"",notes:[]},error:null,loading:!0,token:"",isAuthenticated:!1};case"GET_NOTES":return Object(E.a)({},e,{loading:!1,notes:t.payload});case"ADD_NOTE":return Object(E.a)({},e,{notes:[...e.notes,t.payload]});case"DELETE_TRANSACTION":return Object(E.a)({},e,{notes:e.notes.filter(e=>e._id!==t.payload)});case"TRANSACTION_ERROR":return Object(E.a)({},e,{error:t.payload});default:return e}},g=a(26),f=a.n(g);const v={user:{username:"",email:"",password:"",notes:[]},error:!1,loading:!0,token:"",isAuthenticated:!1},y=Object(n.createContext)(v),O=({children:e})=>{const t=Object(n.useReducer)(h,v),a=Object(d.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)([]),c=Object(d.a)(o,2),u=c[0],i=c[1];function E(){return(E=Object(m.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{"Content-Type":"application/json"}},e.next=4,f.a.post("/api/login",t,a);case 4:if((n=e.sent).data.message.msgError){e.next=9;break}return l({type:"TOKEN",payload:n.data.token}),s.user.username=t.username,e.abrupt("return",n.data);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),l({type:"TRANSACTION_ERROR",payload:e.t0}),e.abrupt("return",e.t0.response.data);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function g(){return(g=Object(m.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{"Content-Type":"application/json"}},e.next=4,f.a.post("/api/register",t,a);case 4:return n=e.sent,l({type:"TOKEN",payload:n.data.token}),s.user.username=t.username,e.abrupt("return",n.data);case 10:return e.prev=10,e.t0=e.catch(0),l({type:"TRANSACTION_ERROR",payload:e.t0}),e.abrupt("return",e.t0.response.data);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function O(){return(O=Object(m.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=s.token,a={headers:{"X-Auth-Token":t,"content-type":"application/json"}},e.next=5,f.a.get("/notes/",a);case 5:return n=e.sent,i(n.data.myNotes),e.abrupt("return",n.data.myNotes);case 10:e.prev=10,e.t0=e.catch(0),l({type:"TRANSACTION_ERROR",payload:e.t0.response});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function b(){return(b=Object(m.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.token,n={headers:{"X-Auth-Token":a,"content-type":"application/json"}},e.prev=2,e.next=5,f.a.post("/notes",t,n);case 5:r=e.sent,i(r.data.myNotes),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),l({type:"TRANSACTION_ERROR",payload:e.t0});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function N(){return(N=Object(m.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.token,n={headers:{"X-Auth-Token":a,"content-type":"application/json"}},e.prev=2,e.next=5,f.a.delete("/notes/".concat(t),n);case 5:r=e.sent,i(r.data.myNotes),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),l({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return r.a.createElement(y.Provider,{value:{user:s.user,notes:u,error:s.error,loading:s.loading,token:s.token,isAuthenticated:s.isAuthenticated,loginUser:function(e){return E.apply(this,arguments)},registerUser:function(e){return g.apply(this,arguments)},getNotes:function(){return O.apply(this,arguments)},AddNote:function(e){return b.apply(this,arguments)},deleteTransaction:function(e){return N.apply(this,arguments)},logout:function(){l({type:"REMOVETOKEN",payload:""})}}},e)};var b=function(e){const t=Object(n.useContext)(y),a=t.user,s=t.isAuthenticated,l=t.logout,o=()=>{l()};return r.a.createElement("header",null,r.a.createElement("h1",null,r.a.createElement(c.a,null),r.a.createElement(u.b,{to:"/",className:"noCss"},"Keeper")),r.a.createElement("div",null,r.a.createElement("ul",null,s?r.a.createElement("div",{className:"right-header"},r.a.createElement("h3",null,"Welcome ",a.username),r.a.createElement("button",{type:"button",onClick:o},r.a.createElement(u.b,{to:"/",className:"noBtn"},"logout"))):r.a.createElement("div",{className:"right-header"},r.a.createElement(u.b,{to:"/login",className:"noCss"},r.a.createElement("li",null,"login")),r.a.createElement(u.b,{to:"/register",className:"noCss"},r.a.createElement("li",null,"Register"))))))};const N=(new Date).getFullYear();var j=function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"copyright \u24d2 ",N))};var w=e=>{const t=Object(n.useContext)(y).isAuthenticated;return r.a.createElement(r.a.Fragment,null,t?(e.history.push("/logedin"),r.a.createElement("div",{className:"Home"},r.a.createElement("h1",null,"please login/Register to start your keeper Notes"))):(e.history.push("/register"),r.a.createElement("div",{className:"Home"},r.a.createElement("h1",null,"please login/Register to start your keeper Notes"))))},k=a(101),C=a(32),T=a.n(C);var R=e=>r.a.createElement("div",null,r.a.createElement("div",{role:"alert",className:"error"},e.message.msgBody.map((e,t)=>r.a.createElement("h1",{key:t},"-",e))));var A=e=>{const t=Object(n.useContext)(y).loginUser,a=Object(n.useState)({username:"",email:"",password:""}),s=Object(d.a)(a,2),l=s[0],o=s[1],c=Object(n.useState)(null),u=Object(d.a)(c,2),i=u[0],p=u[1];function m(e){const t=e.target,a=t.name,n=t.value;o(e=>Object(E.a)({},e,{[a]:n}))}return r.a.createElement("div",{className:"form-style-6"},r.a.createElement("form",{autoComplete:"off",className:"create-user"},r.a.createElement("input",{type:"text",onChange:m,name:"username",value:l.username,placeholder:"Username"}),r.a.createElement("input",{type:"email",onChange:m,name:"email",value:l.email,placeholder:"Email"}),r.a.createElement("input",{type:"password",onChange:m,name:"password",value:l.password,placeholder:"Password"}),r.a.createElement(k.a,{className:"upload-btn",variant:"contained",color:"default",onClick:function(a){a.preventDefault();const n={username:l.username,email:l.email,password:l.password};t(n).then(t=>{if(t.message.msgError)p(t.message),o({username:"",email:"",password:""});else{t.token&&e.history.push("/logedin")}})},startIcon:r.a.createElement(T.a,null)},"Login")),i?r.a.createElement(R,{message:i}):null)};var x=e=>{const t=Object(n.useContext)(y).registerUser,a=Object(n.useState)({username:"",email:"",password:"",password2:""}),s=Object(d.a)(a,2),l=s[0],o=s[1],c=Object(n.useState)(null),u=Object(d.a)(c,2),i=u[0],p=u[1];function m(e){const t=e.target,a=t.name,n=t.value;o(e=>Object(E.a)({},e,{[a]:n}))}return r.a.createElement("div",{className:"form-style-6"},r.a.createElement("div",{className:"welcomeMessage"},r.a.createElement("h1",null,"SignUp to start your Keeper App")),r.a.createElement("form",{autoComplete:"off",className:"create-user"},r.a.createElement("input",{type:"text",onChange:m,name:"username",value:l.username,placeholder:"Username"}),r.a.createElement("input",{type:"email",onChange:m,name:"email",value:l.email,placeholder:"Email"}),r.a.createElement("input",{type:"password",onChange:m,name:"password",value:l.password,placeholder:"Password"}),r.a.createElement("input",{type:"password",onChange:m,name:"password2",value:l.password2,placeholder:"Confirm Password"}),r.a.createElement(k.a,{className:"upload-btn",variant:"contained",color:"default",onClick:function(a){a.preventDefault();const n={username:l.username,email:l.email,password:l.password,password2:l.password2};t(n).then(t=>{if(t.message.msgError)p(t.message),o(e=>Object(E.a)({},e,{email:"",password:"",password2:""}));else{t.token&&e.history.push("/logedin")}})},startIcon:r.a.createElement(T.a,null)},"Register")),i?r.a.createElement(R,{message:i}):null)},S=a(49),_=a.n(S);var I=({note:e})=>{const t=Object(n.useContext)(y).deleteTransaction;return r.a.createElement("div",{className:"note"},r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.content),r.a.createElement("button",{onClick:()=>{t(e._id)}},r.a.createElement(_.a,null)))};var D=function(){const e=Object(n.useContext)(y),t=e.notes,a=e.getNotes;return Object(n.useEffect)(()=>{a()},[]),r.a.createElement(r.a.Fragment,null,t.map(e=>r.a.createElement(I,{key:e._id,note:e})))},K=a(50),U=a.n(K),M=a(102),F=a(103);var P=function(){const e=Object(n.useContext)(y).AddNote,t=Object(n.useState)(!1),a=Object(d.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)({id:0,title:"",content:""}),c=Object(d.a)(o,2),u=c[0],i=c[1];function p(e){const t=e.target,a=t.name,n=t.value;i(e=>Object(E.a)({},e,{[a]:n}))}return r.a.createElement("div",null,r.a.createElement("form",{autoComplete:"off",className:"create-note"},r.a.createElement("input",{onClick:function(){l(!0)},onChange:p,name:"title",placeholder:s?"Title":"Take a note...",value:u.title}),s&&r.a.createElement("textarea",{onChange:p,name:"content",placeholder:"Take a note...",rows:"3",value:u.content}),r.a.createElement(F.a,{in:s},r.a.createElement(M.a,{onClick:function(t){const a={id:Math.floor(1e8*Math.random()),title:u.title,content:u.content};e(a),i({title:"",content:""}),t.preventDefault()}},r.a.createElement(U.a,null)))))};var B=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null),r.a.createElement(D,null)),X=a(19);var H=function(){return r.a.createElement(u.a,null,r.a.createElement(O,null,r.a.createElement("div",null,r.a.createElement(b,null),r.a.createElement(X.a,{exact:!0,path:"/",component:w}),r.a.createElement(X.a,{path:"/logedin",component:B}),r.a.createElement(X.a,{path:"/login",component:A}),r.a.createElement(X.a,{path:"/register",component:x}),r.a.createElement(j,null))))};l.a.render(r.a.createElement(H,null),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.e99d9338.chunk.js.map